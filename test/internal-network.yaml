apiVersion: core.akuity.io/v1
kind: NamespaceClass
metadata:
  name: internal-network
spec:
  deletionPolicy: Cascade
  resources:
    - template:
        apiVersion: networking.k8s.io/v1
        kind: NetworkPolicy
        metadata:
          name: restrict-to-vpn
        spec:
          podSelector: {}
          policyTypes:
            - Ingress
          ingress:
            - from:
                - ipBlock:
                    cidr: 10.0.0.0/8
    - template:
        apiVersion: v1
        kind: ConfigMap
        metadata:
          name: internal-network-info
        data:
          note: "Restricts ingress to corporate VPN CIDR 10.0.0.0/8"
